<!--pages/productdetail/productdetail.wxml-->
<scroll-view scroll-y="true" class="container">
    <view class="address" wx:if="{{defaultAddress}}">
        <view class="address-item flex-between" bindtap="onAddressTap">
            <view class="address-left">
                <view class="name">
                    {{defaultAddress.name}}:
                    <text>{{defaultAddress.phone}}</text>
                </view>
                <view class="location">
                    {{defaultAddress.detailed}}
                </view>
            </view>
            <view class="address-right">
                <image src="/images/gengduo@2x.png"></image>
            </view>
        </view>
    </view>
    <view class="no-address" bindtap="addAddress" wx:if="{{!defaultAddress}}">
        <image src="/images/tianjia@2x.png"> </image>
        <text>新增地址</text>
    </view>
    <view class="product">
        <view class="product-item">
            <view>
                <image class="product-item-img" src="{{imgBaseUrl+productDetail[0].photo1}}"></image>
            </view>
            <view class="product-item-right">
                <view class="product-item-price"><text>¥</text> {{price}}</view>
                <view class="product-item-title">已选：{{productDetail[0].name}}</view>
                <view class="product-item-area">面积：{{heatingArea}}</view>
            </view>
        </view>
        <view class="product-desc">
            {{productDetail[0].description}}
        </view>
        <view class="product-item-tag-c">
            <block wx:for="{{productDetail.characteristicArr}}" wx:key="index">
                <view class="item-tag">
                    {{item}}
                </view>
            </block>
        </view>
    </view>
    <view class="goProductDet flex-between" bindtap="goProductDet">
        <text>产品详情</text>
        <image src="/images/gengduo@2x.png"></image>
    </view>
    <view class="parts">
        <block wx:for="{{productDetail}}" wx:key="index">
            <view class="parts-item">
                <view class="parts-title">{{item.titleLabel}}</view>
                <view class="parts-option">
                    <block>
                        <view
                            class="parts-option-item big {{item.check? 'selected':''}} {{!item.stockStatus?'stock':''}}">
                            {{item.name}}
                        </view>
                    </block>
                </view>
            </view>
        </block>
        <block wx:for="{{productDetail}}" wx:if="{{x.parts && x.check}}" wx:key="index" wx:for-item="x">
            <view class="parts-item">
                <view class="parts-title">{{x.parts.titleLabel}}</view>
                <view class="parts-option">
                    <block wx:for="{{x.parts.parts}}" wx:key="index" wx:for-item="y">
                        <view
                            class="parts-option-item big {{y.check? 'selected':''}} {{!y.stockStatus?'stock':''}}"
                            bindtap="onPowerTap" 
                            data-level="second"
                            data-partsId="{{y.partsId}}"
                            data-price="{{y.money / 100}}" 
                            data-heatingArea="{{y.heatingArea}}"
                            data-stock="{{y.stockStatus}}"
                            >
                            {{y.power}}
                        </view>
                    </block>
                </view>
            </view>
        </block>
        <block wx:for="{{productDetail}}" wx:if="{{x.parts && x.check}}" wx:key="index" wx:for-item="x">
            <block wx:for="{{x.parts.parts}}" wx:if="{{y.parts && y.check}}" wx:key="index" wx:for-item="y">
                <view class="parts-item">
                    <view class="parts-title">{{y.parts.titleLabel}}</view>
                    <view class="parts-option">
                        <block wx:for="{{y.parts.parts}}"  wx:key="index" wx:for-item="z">
                            <view
                                class="parts-option-item big {{z.check? 'selected':''}} {{!z.stockStatus?'stock':''}}"
                                bindtap="onPowerTap" 
                                data-level="third"
                                data-partsId="{{z.partsId}}"
                                data-price="{{z.money / 100}}" 
                                data-heatingArea="{{z.heatingArea}}"
                                data-stock="{{z.stockStatus}}"
                                >
                                {{z.power}}
                            </view>
                        </block>
                    </view>
                </view>
            </block>
        </block>
    </view>
</scroll-view>
<view class="fixed-botton-btns flex-between">
    <view class="icon" bindtap="onCartTap">
        <image src="/images/gouwuche@2x(1).png"></image>
        <view class="text">购物车</view>
        <view class="red-point" wx:if="{{cartCount != 0}}">{{cartCount || 0}}</view>
    </view>
    <view class="join-cart" bindtap="onJoinTap">
        加入购物车
    </view>
    <view class="wx-pay" bindtap="onPayTap">
        微信支付
    </view>
</view>

<view class="model-public-c" wx:if="{{showAddressModel}}">
    <view class='address-c animated {{showAddressModel ?"fadeInUp":""}}'>
        <image bindtap="closedModel" class="closed-btn" src="../../images/close.png" />
        <view class="address-title">配送至</view>
        <item-address binddetailAddress="detailAddress" addresslist="{{addresslist}}"
            defaultAddress="{{defaultAddress}}"></item-address>
    </view>
</view>