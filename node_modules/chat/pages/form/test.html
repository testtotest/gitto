MTkwLTE2MDE0MjY5Njg3MTEtZjg3ZThiMzlkMmQ0NDk3ODllZTE2ODYyNzY0MjU1Y2Q=
app.globalData.token

			
			
			
		
choosePic: function (res) {
    var that = this;  
    var chooseImageUrl = this.data.chooseImageUrl;     
    wx.chooseImage({
      count: 1,
      sizeType: ['original', 'compressed'],
      sourceType: ['album','camera'],
      success(res) {       
        that.getpath(res.tempFilePaths[0]);
      }
    })
  },
  getpath: function (url) {
    var that = this;
    var obj = this.data.obj;
    wx.uploadFile({
      url: api.ImageUpload,//将图片传到服务器的请求路径
      filePath: url,//图片在手机里的存储路径
      name: 'file',     
      success(res) {       
        const data = JSON.parse(res.data);   
        obj.prescriptionPath = data.data.originalUrl;     
        if(data.status == 0){
          that.setData({
            chooseImageUrl: data.data.originalUrl,
            obj:obj
          })
        }
      }
    })
   
  },
  
  
  file:///D:/tongyun_chat/pages/form/formu.js
  
  wx.getStorage({
     key: 'userNamet',		     
  			  fail:function()
  			  {				
  				 wx.redirectTo({
  					url:'/pages/form/islogin?lm=cart'
  				 })				 
  			  }
  })
  <view  class='covers' wx:if="{{isInfo}}">
  	 <view class="covers-a">
  	      <view class="covers-a-title">登录后可查看</view>
  		  <block >			  
  			    <view style="width: 80%;margin:0 auto;">
  					<button open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo"  class="bt2"  bindtap="cshowModal">登录</button></view>				
  		  </block>	  
  	 </view>	 
  	 <view catchtap="hideCover"  class='bg' wx:if="{{isBg}}"></view>
  </view>
  
  .covers {
             width: 100%;
             height: 100%;
             position: fixed;
             top: 0;
             left: 0;
             display: flex;
             justify-content: center;
             align-items: center;
             z-index: 6;
  }
  .covers-a{
  		width: 600rpx;
  		height: 400rpx;
  		background: rgba(255, 255, 255, 1);
  		border-radius: 20rpx;
  		display: flex;
  		flex-direction: column;
  		z-index: 5;
  }
  .covers-a-title{
  	width:100%;
  	display: flex;			  
  	align-items: center;			  
  	justify-content: center;					 
  	margin-top: 82rpx;			
  	height: 32rpx;
  	font-size: 15px;			
  	color: #333333;
  	line-height: 36rpx;
  	margin-bottom: 62rpx;
  			 /* font-weight: bold;  white-space: nowrap;	*/
  }
  .bg 
  {
             position: fixed;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: rgba(0, 0, 0, 0.5);
  }
  .bt2{background-color: #38CF91;font-weight: 100;font-size: 14px;height: 40px;line-height: 40px;border-radius: 40rpx;}
  .bt3{width: 50%;color: #999999;font-weight: 100;font-size: 14px;height: 40px;line-height: 40px;border-radius: 40rpx;}
  data: {
     isBg:false,
  	 isInfo:false,
  },
  
  /**
   * 生命周期函数--监听页面加载
   */
    onLoad: function (options) {  
  		
        this.getIsUserInfo();
    },
  	getIsUserInfo:function(){
  	    var that=this;	
  	    if(wx.getStorageSync('nick')=="") 
  	    {
  			that.setData({
  				isBg:true,
  				isInfo:true
  			})
  		}
  	},
  	bindGetUserInfo: function (res) {
  		var userInfo = res.detail.userInfo;
  		wx.setStorageSync('nick',userInfo.nickName)
  		this.setData({
  			isBg:false,
  			isInfo:false
  		})
  	},