var app = getApp()
var util = require('../../utils/util')
Page({

  /**
   * 页面的初始数据
   */
  data: {
    showModal: false, //取消框
	showd: false, //是否是住宅用电
	isshowd:'请选择',
	itemsshowd:  [{
	      message: '身份证',
	    },{
	      message: '军人证',
	    },{
	      message: '护照',
	    },{
	      message: '户口薄',
	    },{
	      message: '台胞证及港澳身份证件',
	    },{
	      message: '公安机关户籍证明',
	    }],
	  isbg:false,	
	  imgz:[],	
  },
  formModal:function (){
	 var _this = this;
	 wx.setStorageSync("documentType",_this.data.isshowd)
	 wx.setStorageSync("identityProveList",_this.data.imgz)
	 wx.setStorageSync("ownerName",_this.data.ownerName)
	 wx.setStorageSync("ownerIdCard",_this.data.ownerIdCard)
	 wx.setStorageSync("applicantPhone",_this.data.applicantPhone)
	 
	 if (!this.data.ownerName) {
	     wx.showToast({
	         title: "姓名不得为空",
	         icon: "none",
	         duration: 2000,
	     });
	     return false;
	 }
	 if (!this.data.applicantPhone) {
	     wx.showToast({
	         title: "手机号不得为空",
	         icon: "none",
	         duration: 2000,
	     });
	     return false;
	 }
	 if (this.data.applicantPhone.length != 11) {
	     if (util.phone(this.data.applicantPhone)) {
	         wx.showToast({
	             title: "手机号位数不正确",
	             icon: "none",
	             duration: 2000,
	         });
	     }
	     return false;
	 }
	 if (util.phone(this.data.applicantPhone)) {
	     wx.showToast({
	         title: "手机号格式不正确",
	         icon: "none",
	         duration: 2000,
	     });
	     return false;
	 }
	 
  },
  choosezImg: function (e) {
    		this.up("z");	
  },
  up:function(t)
  {
  	var that = this;
  	// var imgs = this.data.imgs;
  	// if (imgs.length >= 6) {
  	// 	wx.showToast({
  	// 	    title: "最多可上传6张照片",
  	// 	    icon: "none",
  	// 	    duration: 2000,
  	// 	});
  	// 	return false;		
  	// }
  	wx.chooseImage({
  	  // count: 1, // 默认9
  	  sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有
  	  sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有
  	  success: function (res) {
  		// 返回选定照片的本地文件路径列表，tempFilePath可以作为img标签的src属性显示图片
  			var tempFilePaths = res.tempFilePaths;
  			
  				var imgz = that.data.imgz;		
  		// console.log(tempFilePaths + '----');
  			    if(t=="c")
  				{
  					that.setData({
  					  imgc: tempFilePaths[0]
  					});		
  				}
  				else if(t=="z"){
  					for (var i = 0; i < tempFilePaths.length; i++) {
  					  if (imgz.length >= 9) {
  						that.setData({
  						  imgz: imgz
  						});
  						return false;
  					  } else {
  						var imgstr={"photo":tempFilePaths[i]}  
  						imgz.push(imgstr);
  					  }
  					} 
  					that.setData({
  					  imgz: imgz
  					});
  				}
  	  }
  	});
  }, 
  onBtna:function (){
  	this.setData({showd:true,isbg:true})
  },
  selBtnb:function (res){
  	this.setData({isshowd:this.data.itemsshowd[res.currentTarget.id].message})
  	this.setData({showd:false,isbg:false})		
  },
  cloBtnb:function (){
  	this.setData({showd:false,isbg:false})
  },
//取消框
oshowModal:function (){
	this.setData({showModal:true})
},
cshowModal:function (){
	this.setData({showModal:false})
	wx.redirectTo({url:"./pera"})
},
  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
        console.log(wx.getStorageSync("region"))
        console.log(wx.getStorageSync("address"))
		console.log(wx.getStorageSync("transformer"))
		console.log(wx.getStorageSync("capacity"))
		console.log(wx.getStorageSync("powerConsumptionTime"))
  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady: function () {

  },

  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {

  },

})