function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function n(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(window,function(){"use strict";var t={elements_selector:"img",container:document,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,callback_finish:null,to_webp:!1},n=function n(e){return _extends({},t,e)},o="data-",r="was-processed",a="ll-timeout",i="true",c=function c(e,t){return e.getAttribute(o+t)},s=function s(e,t,n){var r=o+t;null!==n?e.setAttribute(r,n):e.removeAttribute(r)},l=function l(e){return s(e,r,i)},u=function u(e){return c(e,r)===i},d=function d(e,t){return s(e,a,t)},f=function f(e){return c(e,a)},v=function v(e){return e.filter(function(e){return!u(e)})},p=function p(e,t){return e.filter(function(e){return e!==t})},_=function _(e,t){var n,r="LazyLoad::Initialized",o=new e(t);try{n=new CustomEvent(r,{detail:{instance:o}})}catch(a){(n=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{instance:o})}window.dispatchEvent(n)};function e(e,t){if(t)if(t.length)for(var n,r=0;n=t[r];r+=1)_(e,n);else _(e,t)}var g=function g(e,t){return t?e.replace(/\.(jpe?g|png)/gi,".webp"):e},h=function h(){var e="image/webp",t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL(e).indexOf("data:"+e)},b="undefined"!=typeof window,m=b&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),y=b&&"IntersectionObserver"in window,w=b&&"classList"in document.createElement("p"),k=b&&h(),O=function O(e,t,n,r){for(var o,a=0;o=e.children[a];a+=1)if("SOURCE"===o.tagName){var i=c(o,n);j(o,t,i,r)}},j=function j(e,t,n,r){n&&e.setAttribute(t,g(n,r))},E=function E(e,t){var n=k&&t.to_webp,r=t.data_srcset,o=e.parentNode;o&&"PICTURE"===o.tagName&&O(o,"srcset",r,n);var a=c(e,t.data_sizes);j(e,"sizes",a);var i=c(e,r);j(e,"srcset",i,n);var s=c(e,t.data_src);j(e,"src",s,n)},C=function C(e,t){var n=c(e,t.data_src);j(e,"src",n)},z=function z(e,t){var n=t.data_src,r=c(e,n);O(e,"src",n),j(e,"src",r),e.load()},L=function L(e,t){var n=k&&t.to_webp,r=c(e,t.data_src),o=c(e,t.data_bg);if(r){var a=g(r,n);e.style.backgroundImage='url("'+a+'")'}if(o){var i=g(o,n);e.style.backgroundImage=i}},P={IMG:E,IFRAME:C,VIDEO:z},x=function x(e,t){var n=t._settings,r=e.tagName,o=P[r];if(o)return o(e,n),t._updateLoadingCount(1),void(t._elements=p(t._elements,e));L(e,n)},I=function I(e,t){w?e.classList.add(t):e.className+=(e.className?" ":"")+t},S=function S(e,t){w?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},A=function A(e,t){e&&e(t)},D="load",M="loadeddata",R="error",N=function N(e,t,n){e.addEventListener(t,n)},T=function T(e,t,n){e.removeEventListener(t,n)},V=function V(e,t,n){N(e,D,t),N(e,M,t),N(e,R,n)},J=function J(e,t,n){T(e,D,t),T(e,M,t),T(e,R,n)},Z=function Z(e,t,n){var r=n._settings,o=t?r.class_loaded:r.class_error,a=t?r.callback_load:r.callback_error,i=e.target;S(i,r.class_loading),I(i,o),A(a,i),n._updateLoadingCount(-1)},U=function U(t,n){var r=function r(e){Z(e,!0,n),J(t,r,o)},o=function o(e){Z(e,!1,n),J(t,r,o)};V(t,r,o)},B=["IMG","IFRAME","VIDEO"],$=function $(e,t,n){q(e,n),t.unobserve(e)},F=function F(e){var t=f(e);t&&(clearTimeout(t),d(e,null))},H=function H(e,t,n){var r=n._settings.load_delay,o=f(e);o||(o=setTimeout(function(){$(e,t,n),F(e)},r),d(e,o))};function q(e,t,n){var r=t._settings;!n&&u(e)||(A(r.callback_enter,e),-1<B.indexOf(e.tagName)&&(U(e,t),I(e,r.class_loading)),x(e,t),l(e),A(r.callback_set,e))}var K=function K(e){return e.isIntersecting||0<e.intersectionRatio},G=function G(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}},Q=function Q(e,t){this._settings=n(e),this._setObserver(),this._loadingCount=0,this.update(t)};return Q.prototype={_manageIntersection:function W(e){var t=this._observer,n=this._settings.load_delay,r=e.target;n?K(e)?H(r,t,this):F(r):K(e)&&$(r,t,this)},_onIntersection:function X(e){e.forEach(this._manageIntersection.bind(this))},_setObserver:function Y(){y&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),G(this._settings)))},_updateLoadingCount:function ee(e){this._loadingCount+=e,0===this._elements.length&&0===this._loadingCount&&A(this._settings.callback_finish)},update:function te(e){var t=this,n=this._settings,r=e||n.container.querySelectorAll(n.elements_selector);this._elements=v(Array.prototype.slice.call(r)),!m&&this._observer?this._elements.forEach(function(e){t._observer.observe(e)}):this.loadAll()},destroy:function ne(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function re(e,t){q(e,this,t)},loadAll:function oe(){var t=this;this._elements.forEach(function(e){t.load(e)})}},b&&e(Q,window.lazyLoadOptions),Q}),function(){function a(e,t){"img"===e.localName.toLowerCase()?e.setAttribute("src",t):e.style.backgroundImage="url(".concat(t,")")}function i(e){JZ.lazyloadInst&&(t(),e.getAttribute("data-was-processed")&&JZ.lazyloadInst.load(e,!0))}Vue.directive("lazyload",function(e,t,n,r){if(t.value){var o="".concat(_resRoot,"/image/loading/dot.gif");e.setAttribute("data-src",t.value),a(e,o),i(e)}});var e=null;function t(){clearTimeout(e),e=setTimeout(JZ.initImageLazyload)}}(),function(){function t(n){Vue.nextTick(function(){var e=120,t=JZ.tick(function(){t.times++,(t.times>=e||JZ.sectionObserver)&&(t.clearTick(),t=null,JZ.sectionObserver&&JZ.initLazyloadTwo(n))})})}function s(e,t){"img"===e.localName.toLowerCase()?e.setAttribute("src",t):e.style.backgroundImage="url(".concat(t,")")}function c(e,t,n){var r=t.src;e.classList.add("jz_img_lazyload"),s(e,n),e.setAttribute("src-original",r)}function l(e){e.getAttribute("data-loaded")||t(e)}Vue.directive("lazyload2",function(e,t,n,r){if(t.value){var o=e.getAttribute("data-loaded"),a="".concat(_resRoot,"/image/loading/dot.gif");if(o){if(Fai.top._manageMode){var i=t.value.src;s(e,void 0===i?a:i)}}else c(e,t.value,a),l(e,t.value)}})}(),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueDomPortal=t()}(window,function(){"use strict";function s(e){return void 0===e&&(e=document.body),!0===e?document.body:e instanceof window.Node?e:document.querySelector(e)}var c=new Map,r={inserted:function l(e,t,n){var r=t.value,o=e.parentNode,a=document.createComment(""),i=!1;!1!==r&&(o.replaceChild(a,e),s(r).appendChild(e),i=!0),c.has(e)||c.set(e,{parentNode:o,home:a,hasMovedOut:i})},componentUpdated:function u(e,t){var n=t.value,r=c.get(e),o=r.parentNode,a=r.home,i=r.hasMovedOut;!i&&n?(o.replaceChild(a,e),s(n).appendChild(e),c.set(e,Object.assign({},c.get(e),{hasMovedOut:!0}))):i&&!1===n?(o.replaceChild(e,a),c.set(e,Object.assign({},c.get(e),{hasMovedOut:!1}))):n&&s(n).appendChild(e)},unbind:function n(e,t){c["delete"](e)}};function e(e,t){void 0===t&&(t={});var n=t.name;void 0===n&&(n="dom-portal"),e.directive(n,r)}return e.version="0.1.6","undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e}),Vue.directive("animate",function(e,t){var n=t.value,r=n.commProp,o=r.al,a=r.cal;n.animated||(3!=n.style&&n.style,o.forEach(function(e){if(0!=e.t)return!1}),a.forEach(function(e){if(0!=e.t)return!1}),n.id)}),Vue.directive("animate-obsever",function(e,t){var n=t.value.commProp,r=!1,o=!1;if(n){var a=n.al,i=n.cal;a.forEach(function(e){if(0!=e.t)return!(r=!0)}),i.forEach(function(e){if(0!=e.t)return!(o=!0)})}(o||r)&&Fai.top._manageMode&&(e.classList.add("jz_module_animation"),setTimeout(function(){jzUtils.run({name:"initAnimationObserver",callMethod:!0,base:JZ},e)},50))}),function(){var e={data:function t(){return{text:"......"}},template:'\n            <div class="jz_loading">\n                <div class="jz_loading_center">\n                    <span class="jz_loading_img jz_loading_animate"></span>\n                    <p class="jz_loading_text">{{ text }}</p>\n                </div>\n            </div>\n        '},i=Vue.extend(e);function s(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):-1<(" "+e.className+" ").indexOf(" "+t+" ")}function c(e,t){if(e){for(var n=e.className,r=(t||"").split(" "),o=0,a=r.length;o<a;o++){var i=r[o];i&&(e.classList?e.classList.add(i):s(e,i)||(n+=" "+i))}e.classList||(e.className=n)}}function n(e,t){if(e&&t){for(var n=t.split(" "),r=" "+e.className+" ",o=0,a=n.length;o<a;o++){var i=n[o];i&&(e.classList?e.classList.remove(i):s(e,i)&&(r=r.replace(" "+i+" "," ")))}e.classList||(e.className=trim(r))}}Vue.directive("loading",{bind:function l(e,t,n){var r=n.context,o=e.getAttribute("jz-loading-text"),a=new i({el:document.createElement("div"),data:{text:r&&r[o]||o}});e.instance=a,e.mask=a.$el,c(e,"jz_loading_container"),t.value&&e.appendChild(e.mask)},update:function r(e,t){t.oldValue!==t.value&&(t.value?(e.appendChild(e.mask),c(e,"jz_loading_container")):(e.mask&&e.removeChild(e.mask),n(e,"jz_loading_container")))},unbind:function o(e){e.instance&&e.instance.$destroy(),n(e,"jz_loading_container")}})}(),function(e,f){var s=0,c=!1,v={},p=s,_=[],g=!1,h=-1,b=null,t=f(document),i=t.find("body"),n=f("#jz_web"),r={dragstart:{},dragover:{},dragend:{},drop:{}};function o(e,t,n){if(r[e][t]!==undefined)throw Error("[v-draggable] ".concat(e," ").concat(t," exist"));r[e][t]=n}function l(t,n){Object.keys(r).forEach(function(e){o(e,t,n[e])})}function u(e,t){var n=r[t][e];return"function"==typeof n?n:f.noop}function m(e,t){for(var n,r=arguments.length,o=new Array(2<r?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(n=u(t,e)).call.apply(n,[null].concat(o))}function d(){_=[],(b=t.find(".web_col_content")).children(".jz_project:not('#dragPlaceholder')").each(function(){var e=f(this),t=e.offset(),n=e.outerHeight(!0),r=e.outerWidth(!0),o=Math.floor(t.top+n/2);_.push({id:e.attr("id"),center:o,left:t.left,right:t.left+r,top:t.top,bottom:t.top+n})})}function y(){var e=f(".web_col_content_empty"),o=[];return e.each(function(){var e=f(this),t=e.offset(),n=e.height(),r=e.width();o.push({id:e.attr("id"),col:e,left:t.left,right:t.left+r,top:t.top,bottom:t.top+n,height:n,width:r})}),o}function w(e,t){v[e]=t}function k(t,e){return!(!t||!e)&&(!!e.split(",").some(function(e){return t.hasClass(e.slice(1))})||e.split(",").some(function(e){return 0<t.parents(e).length}))}function O(e){f(e).append('<div id="dropToEmpty" class="no_rows_darg_placeHolder web_col_content web_col_content_empty"><div id="jzProjectDrag" class="jz_project" style="height:200px;">放在这里</div></div>')}function j(){f("#dropToEmpty").remove()}function E(e){return e&&f(e).length}function C(){c||(c=!0,b=t.find(".web_col_content"),i.on("dragover.draggable",function(e){e.preventDefault();var t=e.originalEvent.pageY,n=e.originalEvent.pageX,r=null,o=null;f("#addDragPlaceholder").length||(JZ.addModulePlaceholder(!1),b.first().find("#addDragPlaceholder").off("dragenter.drag").on("dragenter.drag",function(e){e.preventDefault()}),b.first().find("#addDragPlaceholder").off("dragover.drag").on("dragover.drag",function(e){e.preventDefault()})),r=f("#addDragPlaceholder");for(var a=0,i=_.length-1;a<=i;a++){var s=_[a];if(t>s.top&&t<s.bottom&&n>s.left&&n<s.right){o=f("#"+s.id),g=k(o,v[p]),t>=s.top&&t<s.center&&!o.prev().hasClass("J_add_drag_placeholder")&&(r.insertBefore(o),h=0,g?r.addClass("jz_placeholder_disable"):r.removeClass("jz_placeholder_disable")),t>=s.center&&t<=s.bottom&&!o.next().hasClass("J_add_drag_placeholder")&&(r.insertAfter(o),h=1,g?r.addClass("jz_placeholder_disable"):r.removeClass("jz_placeholder_disable"));break}}for(var c=y(),l=null,u=0,d=c.length;u<d;u++)if(t>(l=c[u]).top&&t<l.bottom&&n>l.left&&n<l.right){(g=k(l.col,v[p]))?r.addClass("jz_placeholder_disable"):r.removeClass("jz_placeholder_disable"),l.col.append(r),h=-1;break}m("dragover",p,e)}),b.off("drag.draggable").on("drag.draggable",function(e){e.preventDefault()}),b.off("dragleave.draggable").on("dragleave.draggable",function(e){e.preventDefault()}),b.off("dragover.draggable").on("dragover.draggable",function(e){e.preventDefault()}),n.off("dragenter.draggable").on("dragenter.draggable",function(e){e.preventDefault()}),i.on("drop.draggable",function(e){e.preventDefault();var t=i.find("#addDragPlaceholder");if(t.siblings("#jzProjectDrag").length)return m("drop",p,{rowId:-1,colIndex:0,insertVertical:0}),!1;var n=t.parentsUntil(".jz_web_rows",".jz_web_row "),r=t.parentsUntil(".jz_web_row",".jz_web_col"),o=Comm.getElemId(n,"row"),a=parseInt(r.attr("_index"))||0;return b.find(".form").removeClass("fk-sortModuleStyle"),g||m("drop",p,{rowId:o,colIndex:a,insertVertical:h}),t.remove(),g=!1}))}var a={bind:function z(e,t){if(!this.$isServer){var n=++s,r=f(e),o=t.value||{},a=o.dropToEmpty,i=!1;c||C(),r.attr("draggable",!0),r.addClass("J_draggable_item"),l(n,o),w(n,o.disabledClass),r.on("dragstart",function(){i=E(a),p=n,i&&O(a),d(),m("dragstart",n,o.data)}),r.on("dragend",function(){p=0,m("dragend",n),i&&j()})}}};e.directive("draggable",a)}(window.Vue,window.jQuery);var SectionObserver=function(){function t(e){_classCallCheck(this,t),this.options=e,this.observerList={},this._takeRecords=[],this.init()}return _createClass(t,[{key:"init",value:function n(){try{this._setObserver()}catch(e){console.log(e),Site.logMonitor(7304,!0)}}},{key:"_typeof",value:function r(e){var t=_typeof2(e);return"object"===t&&null!==e&&Array.isArray(e)?"array":"function"===t?"function":null===e?"null":"object"!==t?t:"object"}},{key:"_setObserver",value:function o(){var d=this,e=this._assginOptons(this.options),t=e.componentList,f=e.parentRoot,v=e.parentThreshold,p=e.parentRootMargin,_=e.parentDelay,g=this;t.forEach(function(e){var t=e.observerClass,n=e.runCallBack,r=e.finishCallBack,o=e.id,a=e.root,i=e.threshold,s=e.rootMargin,c=e.delay,l=e.isUnobserve;a=a||f,i=i||v,s=s||p,c=c||_;var u=new IntersectionObserver(function(e,t){g._checkObserver(g._getObserver(o)),d._checkParams(n,"runCallBack","function"),e.forEach(function(t){var e=n(t);if(!(e instanceof Promise))throw new Error("runCallBack params must be return Promise");e.then(function(e){"function"===g._typeof(r)&&r(e),l&&g._unobserve(g._getObserver(o),t.target)})["catch"](function(e){console.log(e),Site.logMonitor(7304,!0)})})},{root:a,threshold:i,rootMargin:s,delay:c});d._addObserverItem(u,o),d._observerElem(t,u)})}},{key:"_checkElement",value:function a(e){return"object"===this._typeof(HTMLElement)?e instanceof HTMLElement:e&&"object"===this._typeof(e)&&1===e.nodeType&&"string"===this._typeof(e.nodeName)}},{key:"_checkElementOrString",value:function i(e){if("string"!==this._typeof(e)&&"object"!==this._typeof(e))throw new Error("".concat(e," params must be string or object"))}},{key:"_addObserverItem",value:function s(e,t){this._checkParams(e,"observer","object"),this.observerList["observer".concat(t)]=e}},{key:"_assginOptons",value:function c(e){return this._checkParams(e,"observer","object"),_objectSpread({},e,{parentRoot:null,parentThreshold:.01,parentRootMargin:"100px 0px",parentDelay:0})}},{key:"_observerElem",value:function u(e,t){if(this._checkObserver(t),this._checkElementOrString(e),t._takeRecords||(t._takeRecords=[]),"string"===this._typeof(e)){var n=document.querySelectorAll(e),r=!0,o=!1,a=undefined;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;t.observe(c),t._takeRecords.push(c)}}catch(l){o=!0,a=l}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw a}}}else this._checkElement(e)&&(t._takeRecords.push(e),t.observe(e))}},{key:"_unobserve",value:function l(e,r){e.unobserve(r),e._takeRecords.forEach(function(e,t,n){e==r&&n.splice(t,1)})}},{key:"_checkParams",value:function d(e,t,n){if(this._typeof(e)!==n)throw new Error("".concat(t," params must be ").concat(n))}},{key:"_checkObserver",value:function f(e){if(!e.rootMargin)throw new Error("observer is not found")}},{key:"_getObserver",value:function v(e){var t=this.observerList["observer".concat(e)];return this._checkObserver(t),t}},{key:"updateObserver",value:function p(e,t){var n=this._getObserver(t);this._observerElem(e,n)}},{key:"destroyObserver",value:function _(e){this._getObserver(e).disconnect(),this.observerList["observer".concat(e)]=null}},{key:"getObserverRecords",value:function g(e){return this._getObserver(e)}},{key:"unobserve",value:function h(e,t){var n=this._getObserver(t);this._unobserve(n,e)}},{key:"takeRecords",value:function b(e){return this._getObserver(e)._takeRecords}},{key:"isObserve",value:function m(t,e){var n=this._getObserver(e);if(this._checkElement(t)&&n._takeRecords.length)return n._takeRecords.some(function(e){return e==t})}}]),t}();